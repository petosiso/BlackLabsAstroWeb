---
import contactIconRaw from "../../../assets/icons/contact-icon.svg?raw";
import Button from "../button/Button.astro";

function sanitizeToWhite(svg: string, size = 18) {
  let s = svg
    .replace(/<\?xml[\s\S]*?\?>/g, "")
    .replace(/<!--([\s\S]*?)-->/g, "")
    .replace(/width=\"[^\"]*\"/g, "")
    .replace(/height=\"[^\"]*\"/g, "")
    // Ensure shapes are visible: use white via currentColor on fill, drop strokes
    .replace(/fill=\"[^\"]*\"/gi, 'fill="currentColor"')
    .replace(/stroke=\"[^\"]*\"/gi, 'stroke="none"');
  s = s.replace(
    /<svg([^>]*)>/,
    (m, attrs) => `<svg${attrs} width="${size}" height="${size}">`,
  );
  return s;
}

const contactIcon = sanitizeToWhite(contactIconRaw);
---

<footer id="contact" class="py-12 px-4 text-center">
  <h2 class="text-2xl md:text-3xl font-semibold text-foreground">
    Rozmýšlate nad Smart domácnosťou?
  </h2>
  <p class="mt-2 text-[color:var(--color-text-muted)]">
    Ozvite sa a bezplatne môžeme prekonzultovať možnosti
  </p>
  <div class="mt-6 flex justify-center">
    <Button href="mailto:info@blacklabs.sk" variant="secondary" size="md">
      <span
        class="inline-flex mr-2"
        aria-hidden="true"
        set:html={contactIcon}
      />
      info@blacklabs.sk
    </Button>
  </div>
  <div class="mt-6 text-sm text-[color:var(--color-text-muted)]">
    Made by: <a href="" class="hover:text-[color:var(--accent)]"
      >blacklabs</a
    >.
  </div>
</footer>
